<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">


    <!-- 토글체크버튼
    <script src='//unpkg.com/jquery@3/dist/jquery.min.js'></script>
    <script src='//unpkg.com/popper.js@1/dist/umd/popper.min.js'></script>
    <link href="//cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.4.0/css/bootstrap4-toggle.min.css" rel="stylesheet">  
    <script src="//cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.4.0/js/bootstrap4-toggle.min.js"></script> -->

    <!-- <link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet"> -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"  rel="stylesheet"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css"> -->
    <!-- sort기능 -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <!-- <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script> -->

    <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script> -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->


    <style>
        body {
            background-color: #F2F1F4;
            /* margin-top: 20px; */
        }

        p {
            font-size: 12px;
            margin-bottom: 5px;

        }

        .calculator {
            /* width: 382px; */
            margin: 5px;
            border-radius: 10px;

            background: #FFFFFF;
        }

        h4 {
            padding: 10px 10px;
            text-align: left;
            font-size: 12pt;
        }

        .sizeData {

            background-color: #F2F1F4;
            text-align: right;
            font-size: 20pt;
            border: none;
        }

        input:focus {
            outline: none;
        }

        .container {
            padding: 5px;
        }


        table {
            font-size: 10px;
            max-height: 200px;
            text-align: center;
        }

        [class~=btn] {
            font-size: 10px;
            padding: 5px;
        }

        [class^=form] {
            font-size: 10px;
        }

        select[class^=form] {
            height: 30px;
        }

        .totalCost {
            padding-right: 10px;
            color: royalblue;
            font-size: 2rem;
            font-weight: normal;
            line-height: 40px;
        }

        .tableFixHead {
            overflow: auto;
            max-height: 250px;
        }

        .tableFixHead thead th {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .clock {
            background-color: #F2F1F4;
            color: rgb(89, 131, 189);
            position: relative;
            border: none;

            /* text-align: center; */
        }
    </style>

</head>

<body>

    <!-- 시계 -->
    <div class="container">
        <div class="calculator rounded-lg" style="padding-bottom: 3px;">
            <div style="margin:10px ">
                <div class="container d-flex bd-highlight"
                    style="display: flex; justify-content: space-between; height:50px">
                    <h4 style="display: inline-block;" class="p-2 flex-grow-1 bd-highlight">시계</h4>
                </div>
                <div class="clock"
                    style=" border-radius: 5px; background-color: #F2F1F4; text-align: center; position: relative;">
                    <div>
                        <span id="time" style=' font-size:70pt;'></span>
                        <span style='display:inline-block;  '>
                            <div id="amPm" style=' font-size:15pt;'> </div>
                            <div id="sec" style=' font-size:25pt;'> </div>
                        </span>
                    </div>

                    <div id="date" style=' font-size:17pt; '></div>
                </div>

            </div>
        </div>
    </div>
    <!-- 재단 -->
    <div class="container">
        <div class="calculator rounded-lg">
            <div style="margin:0px 10px">
                <div class="container d-flex bd-highlight"
                    style="display: flex; justify-content: space-between; height:50px">
                    <h4 style="display: inline-block;" class="p-2 flex-grow-1 bd-highlight">재단 계산기</h4>
                    <img src="circle.svg" class="p-2 bd-highlight">
                    <button class="btn btn-primary p-2 bd-highlight" type="button" data-toggle="collapse"
                        data-target="#collapseExample" style="display: inline-block;  ">
                        ▼
                    </button>
                </div>
                <div id="collapseExample">
                    <input class=" container sizeData form-control " id="size" type="text" placeholder="0" required autofocus>

                    <div class="container justify-content-between">
                        <div class="row  justify-content-between" id="">
                            <div class="container  col-7 d-grid ">
                                <p>재료</p>
                                <div class="btn-group btn-group-toggle  " id="material" style=" display: flex;">
                                    <input type="radio" class="btn-check " name="ma-radio" id="ma-radio-1" value="포맥스"
                                        checked>
                                    <label class="btn btn-outline-secondary" for="ma-radio-1"> 포맥스 </label>
                                    <input type="radio" class="btn-check" name="ma-radio" id="ma-radio-2" value="아크릴">
                                    <label class="btn btn-outline-secondary " for="ma-radio-2"> 아크릴 </label>
                                    <input type="radio" class="btn-check" name="ma-radio" id="ma-radio-3" value="PC">
                                    <label class="btn btn-outline-secondary " for="ma-radio-3"> PC </label>
                                </div>
                            </div>

                            <div class="container  col-5 d-grid  ">
                                <p>색상</p>
                                <div class="btn-group btn-group-toggle " id="color">
                                    <input type="radio" class="btn-check" name="color-radio" id="color-radio-1"
                                        value="백색" checked>
                                    <label class="btn btn-outline-secondary " for="color-radio-1"> 백색 </label>
                                    <input type="radio" class="btn-check" name="color-radio" id="color-radio-2"
                                        value="컬러">
                                    <label class="btn btn-outline-secondary " for="color-radio-2" id="colorLabel"> 컬러
                                    </label>
                                </div>
                            </div>

                            <div class="container  col-12 d-grid   ">
                                <p>두께</p>
                                <div class="btn-group btn-group-toggle" id="thickness">
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-1" value="1T">
                                    <label class="btn btn-outline-secondary " for="th-radio-1"> 1T </label>
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-2" value="2T">
                                    <label class="btn btn-outline-secondary " for="th-radio-2"> 2T </label>
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-3" value="3T"
                                        checked>
                                    <label class="btn btn-outline-secondary " for="th-radio-3"> 3T </label>
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-5" value="5T">
                                    <label class="btn btn-outline-secondary " for="th-radio-5"> 5T </label>
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-8" value="8T">
                                    <label class="btn btn-outline-secondary " for="th-radio-8"> 8T </label>
                                    <input type="radio" class="btn-check" name="th-radio" id="th-radio-10" value="10T">
                                    <label class="btn btn-outline-secondary " for="th-radio-10"> 10T </label>
                                </div>
                            </div>

                            <div style='padding:5px;' class="tableFixHead ">
                                <table class="table   table-bordered table-hover table-sm table-sorting dataTable"
                                    id="sortTable">
                                    <thead class="table-primary">
                                        <tr>
                                            <th>재료</th>
                                            <th>두께</th>
                                            <th>색상</th>
                                            <th>가로</th>
                                            <th>세로</th>
                                            <th>수량</th>
                                            <th>판가격</th>
                                            <th>재단비</th>
                                            <th>가격</th>
                                        </tr>
                                    </thead>
                                    <tbody style="height: 10px !important; overflow: scroll; " id="maBody">
                                        <!-- <tr onclick="getReserveInfo(this);">
                                            <td>포맥스</td>
                                            <td>2T</td>
                                            <td>백색</td>
                                            <td>200</td>
                                            <td>2200</td>
                                            <td>20</td>
                                            <td>6600</td>
                                            <td>30000</td>
                                            <td>35000</td>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row   ">
                            <div class="container col   align-self-center">
                                <button style="width:45px; height:32px; " class="btn btn-outline-danger " type="button"
                                    id="btn-reset-row">Reset</button>
                                <button style="width:45px; height:32px; " class="btn btn-outline-dark " type="button"
                                    id="btn-delete-row">Del</button>
                                <button style="width:45px; height:32px; " class="btn btn-outline-primary " type="button"
                                    id="btn-import-row">입력</button>
                            </div>
                            <div class="container  col-7 ">
                                <div style="background-color: #F2F1F4; text-align:right; " class="totalCost "
                                    id="totalCost">
                                    0
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 샌드위치 -->
    <div class="container">
        <div class="calculator rounded-lg">
            <div style="margin:0px 10px">
                <div class="container d-flex bd-highlight"
                    style="display: flex; justify-content: space-between; height:50px">
                    <h4 style="display: inline-block;" class="p-2 flex-grow-1 bd-highlight">샌드위치</h4>
                    <img src="circle.svg" class="p-2 bd-highlight">
                    <button class="btn btn-primary  p-2 bd-highlight" type="button" data-toggle="collapse"
                        data-target="#collapseExample-SAW" style="display: inline-block;  ">
                        ▼
                    </button>

                </div>
                <div id="collapseExample-SAW">
                    <input class=" container sizeData form-control " id="size-SAW" type="text" placeholder="0" required>

                    <div class="container justify-content-between">
                        <div class="row  justify-content-between" id="">
                            <div class=" container btn-group btn-group-toggle">
                                <div style=" width:30%" class="">
                                    <label for="material-SAW" class="form-label">재료</label>
                                    <select class="form-select" id="material-SAW" required>
                                        <option value="아크릴/포맥스">아크릴/포맥스</option>
                                        <option value="아크릴/아크릴">아크릴/아크릴</option>
                                    </select>
                                </div>

                                <div class="col-2">
                                    <label for="front-thickness" class="form-label">앞판</label>
                                    <select class="form-select" id="front-thickness" required>
                                        <option value="2T">2T</option>
                                        <option value="3T">3T</option>
                                        <option value="5T" selected>5T</option>
                                        <option value="8T">8T</option>
                                    </select>
                                </div>

                                <div class="col-2">
                                    <label for="rear-thickness" class="form-label">뒷판</label>
                                    <select class="form-select" id="rear-thickness" required>
                                        <option value="" selected>...</option>
                                        <option value="2T">2T</option>
                                        <option value="3T">3T</option>
                                        <option value="5T">5T</option>
                                        <option value="8T">8T</option>
                                    </select>
                                </div>

                                <div class="col-2">
                                    <label for="hole" class="form-label">타공</label>
                                    <select class="form-select" id="hole-SAW">
                                        <!-- onfocus='this.size=10;' 한번에보일숫자 onblur='this.size=1;' onchange='this.size=1; this.blur();'  선택찯이 form형태-->
                                        <option value="4">4</option>
                                        <option value="6">6</option>
                                        <option value="8">8</option>
                                        <option value="10">10</option>
                                        <option value="12">12</option>
                                    </select>
                                </div>

                                <div style=" width:20%" class="">
                                    <label for="color-SAW" class="form-label">뒷판색상</label>
                                    <select class="form-select" id="color-SAW" required >
                                        <option value="백색">백색</option>
                                        <option value="컬러">컬러</option>
                                    </select>
                                </div>
                            </div>

                            <div style='padding:5px;' class="tableFixHead ">
                                <table class="table   table-bordered table-hover table-sm table-sorting dataTable"
                                    id="sortTable-SAW">
                                    <thead class="table-primary">
                                        <tr>
                                            <th>재료</th>
                                            <th>두께</th>
                                            <th>가로</th>
                                            <th>세로</th>
                                            <th>타공</th>
                                            <th>색상</th>
                                            <th>단가</th>
                                            <th>수량</th>
                                            <th>가격</th>
                                        </tr>
                                    </thead>
                                    <tbody style="height: 10px !important; overflow: scroll; " id="maBody">

                                        <!-- <tr onclick="getReserveInfo(this);">
                                            <td>A/A</td>
                                            <td>3T/3T</td>
                                            <td>1200</td>
                                            <td>700</td>
                                            <td>4</td>
                                            <td>백색</td>
                                            <td>74000</td>
                                            <td>1</td>
                                            <td>74000</td>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="container col   align-self-center">
                                <button style="width:45px; height:32px; " class="btn btn-outline-danger " type="button"
                                    id="btn-reset-row-SAW">Reset</button>
                                <button style="width:45px; height:32px; " class="btn btn-outline-dark " type="button"
                                    id="btn-delete-row-SAW">Del</button>
                                <button style="width:45px; height:32px; " class="btn btn-outline-primary " type="button"
                                    id="btn-import-row-SAW">입력</button>
                            </div>
                            <div class="container  col-7 ">
                                <div style="background-color: #F2F1F4; text-align:right; " class="totalCost "
                                    id="totalCost-SAW">
                                    0
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script>
        $(document).ready(function () {
            var materials = {
                아크릴: {
                    thk1T: { unitCost: (50000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 1800 },
                    thk2T: { unitCost: (95000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 1400 },
                    thk3T: { unitCost: (115000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 1050 },
                    thk5T: { unitCost: (155000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 800 },
                    thk8T: { unitCost: (207000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 450 },
                    thk10T: { unitCost: (252000 / 2880000) * 1, 금경unitCost: (50000 / 2880000).toFixed(4) * 1, speed: 300 },
                    colorPara: 2
                },
                포맥스: {
                    thk1T: { unitCost: (23000 / 2880000) * 1, 컬러unitCost: (22000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    thk2T: { unitCost: (35000 / 2880000) * 1, 컬러unitCost: (31000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    thk3T: { unitCost: (46000 / 2880000) * 1, 컬러unitCost: (43000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    thk5T: { unitCost: (63000 / 2880000) * 1, 컬러unitCost: (63000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    thk8T: { unitCost: (104000 / 2880000) * 1, 컬러unitCost: (96000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    thk10T: { unitCost: (120000 / 2880000) * 1, 컬러unitCost: (114000 / 2880000).toFixed(4) * 1, speed: 1200 },
                    colorPara: 1.2
                },
                PC: {
                    thk1T: { unitCost: (50000 / 2880000) * 1, 광pcunitCost: (50000 / 2880000).toFixed(4) * 1, speed: 1800 },
                    thk2T: { unitCost: (95000 / 2880000) * 1, 광pcunitCost: (17000 / 2880000).toFixed(4) * 1, speed: 1400 },
                    thk3T: { unitCost: (115000 / 2880000) * 1, 광pcunitCost: (17000 / 2880000).toFixed(4) * 1, speed: 1050 },
                    thk5T: { unitCost: (155000 / 2880000) * 1, 광pcunitCost: (17000 / 2880000).toFixed(4) * 1, speed: 800 },
                    colorPara: 1
                }
            }
            //토글활성화
            $('#collapseExample, #collapseExample-SAW ').collapse()
            //재단계산기 datatable
            var matable = $('#sortTable').DataTable({
                // "scrollY": "200px",
                // "scrollCollapse": true,
                paging: false,
                searching: false,
                info: false,
                order: false
                //     // "order":[[3,"desc"]],
                //     // "columnDefs":[{
                //     //     "orderable":false,
                //     //     "targets":[0,1,4,5,6,7]
                //     // }] 특정 열을 안되게 할때
            });
            //샌드위치 datatable
            var matable_SAW = $('#sortTable-SAW').DataTable({
                paging: false,
                searching: false,
                info: false,
                order: false
            });


            // 재단계산기_재질,색상 등 버튼 클릭 시 변환
            $('#material >input , #color >input').change(function () {
                // $('#thickness > input').attr('disabled', false);
                $('label').show();// 일단 모든 버튼이 보이는 상태에서 시작
                var malable = $('input[name="ma-radio"]:checked').val();//선택되어진 재료
                var colorlabel = $('input[name="color-radio"]:checked').val();//선택되어진 색상
                var thlabel = $('input[name="th-radio"]:checked').val();//선택되어진 두께

                if (malable == '포맥스') {
                    $("#colorLabel").text("컬러"), $('#color-radio-2').val("컬러");

                } else if (malable == '아크릴') {
                    $("#colorLabel").text("금경"), $('#color-radio-2').val("금경"),
                        $('label[for="th-radio-1"]').css('display', 'none');
                    if ($('input[name="color-radio"]:checked').val() == '금경') {
                        $('label[for="th-radio-2"]').css('display', 'none');
                        $('label[for="th-radio-8"]').css('display', 'none');
                        $('label[for="th-radio-10"]').css('display', 'none');
                    }
                } else if (malable == 'PC') {

                    $("#colorLabel").text("광pc"), $('#color-radio-2').val("광pc"),
                        $('label[for="th-radio-1"]').css('display', 'none');
                    $('label[for="th-radio-8"]').css('display', 'none');
                    $('label[for="th-radio-10"]').css('display', 'none');
                    // $('#th-radio-1,#th-radio-8, #th-radio-10').attr('disabled', true);
                }

                var checkedButton = $('input[name="th-radio"]:checked').attr('id'); //체크된 버튼 아이디 가져오기
                var gry = "label[for='" + checkedButton + "']";
                if ($(gry).css('display') == 'none') { // 체크된 버튼 아이디의  라벨이 보이지 않는 상태면
                    $("input:radio[name='th-radio']:radio[value='3T']").prop('checked', true); // '3T'버튼선택하기 
                }
            });
            // 재단계산기_입력후 엔터
            $("#size").keydown(function (key) {
                if (key.keyCode == 13) {//키가 13이면 실행 (엔터는 13)
                    maValueImport();
                }
            });
            // 재단계산기_입력후  키 클릭
            $("#btn-import-row").click(function () {
                maValueImport();
            });
            // 재단계산기_자료를 테이블에 입력
            function maValueImport() {
                var maStr = $("#size").val();
                var maCount = ""; // 수량
                var maWidth = ""; //가로
                var maHeight = ""; // 세로
                var maPrice = ""; // 재단판가격
                var cutPrice = ""; // 재단 가격
                var ma_cutPrice = "";// 총 재단 가공가격
                //  $("input:radio[name='fruits']:radio[value='사과']").prop('checked', true); // 선택하기
                // $("input:radio[name='fruits']:radio[value='사과']").prop('checked', false); // 해제하기
                var materialVal = $('input[name="ma-radio"]:checked').val(); //재로
                var colorVal = $('input[name="color-radio"]:checked').val(); // 색상
                var thlVal = $('input[name="th-radio"]:checked').val(); // 두께
                var maArray = maStr.split('+');
                var colorfactor = colorVal == "백색" ? 1 : materials[materialVal].colorPara;
                maWidth = maArray[0];
                maHeight = maArray[1];

                if (maArray[2]) {
                    maCount = maArray[2];
                } else { maCount = 1; }

                var largeMa = Math.max(maWidth, maHeight);
                var smallMa = Math.min(maWidth, maHeight);

                if (maWidth && maHeight) {
                    if (largeMa <= 2400 && smallMa <= 1200 && maWidth != 0 && maHeight != 0) {

                        maPrice = Math.ceil(Math.floor(getmaPrice(materialVal, thlVal, maCount, maWidth, maHeight) * colorfactor / 10) * 10 / 1000) * 1000; // 재단판가격
                        cutPrice = getcutPrice(maCount, maWidth, maHeight); // 재단 가격
                        ma_cutPrice = maPrice + cutPrice; // 총 재단 가공가격
                        matable.row.add([
                            materialVal,
                            thlVal,
                            colorVal,
                            maWidth,
                            maHeight,
                            maCount,
                            maPrice,
                            cutPrice,
                            ma_cutPrice
                        ]).draw(false);
                        // $('#sortTable > tbody:last').append(' <tr onclick="getReserveInfo(this);">' +
                        //     '<td>' + matrialVal + '</td>' +
                        //     '<td>' + thlVal + '</td>' +
                        //     '<td>' + colorVal + '</td>' +
                        //     '<td>' + maWidth + '</td>' +
                        //     '<td>' + maHeight + '</td>' +
                        //     '<td>' + maCount + '</td>' +
                        //     '<td>3200</td>' +
                        //     '<td>300</td>' +
                        //     '<td>5000</td>');
                        maCalculation("#sortTable", "#totalCost");
                    }
                }
                $("#size").val('');
            }
            ////////////////////////////////////////////////////////////////////////////////////////////
            // 샌드위치_입력후 엔터
            $("#size-SAW").keydown(function (key) {
                if (key.keyCode == 13) {//키가 13이면 실행 (엔터는 13)
                    maValueImport_SAW();
                }
            });
            // 샌드위치_입력후  키 클릭
            $("#btn-import-row-SAW").click(function () {
                maValueImport_SAW();
            });

            $('#material-SAW ').on('change ', function () {
                //alert(this.value); 
                if ($(this).val() == "아크릴/포맥스") {
                    $("#color-SAW").prop("disabled", false);
                } else {
                    $("#color-SAW").prop("disabled", true);
                    $("#color-SAW").val("백색");
                }
            });

            // 샌드위치_자료를 테이블에 입력
            function maValueImport_SAW() {
                var maStr = $("#size-SAW").val();
                var maCount = ""; // 수량
                var maWidth = ""; //가로
                var maHeight = ""; // 세로
                var maFrontPrice = ""; // 앞판가격
                var maRearPrice = ""; // 뒷판가격
                var ma_cutPrice = "";// 총 재단 가공가격
                var holeCount = $("#hole-SAW option:selected").val(); // 타공 수
                var materialVal = ($("#material-SAW option:selected").val() == "아크릴/아크릴" ? "A/A" : "A/F"); //재로
                var colorVal = $("#color-SAW option:selected").val(); // 색상
                var frontTh = $("#front-thickness option:selected").val(); //앞판두께
                var rearTh = $("#rear-thickness option:selected").val(); //앞판두께
                var thlVal = frontTh + "/" + rearTh; // 두께
                var holeVal = 500; // 개당타공 가격
                var sideval = 10000;// 면처리 비용....면/불 = 10000.
                var maArray = maStr.split('+');
                var rearMaterial = $("#material-SAW option:selected").val().split('/');
                var colorfactor = colorVal == "백색" ? 1 : materials[materialVal].colorPara;
                maWidth = maArray[0];
                maHeight = maArray[1];
               
                if (maArray[2]) {
                    maCount = maArray[2];
                } else { maCount = 1; }

                var largeMa = Math.max(maWidth, maHeight);
                var smallMa = Math.min(maWidth, maHeight);

                if (maWidth && maHeight) {
                    if (largeMa <= 2400 && smallMa <= 1200 && maWidth != 0 && maHeight != 0) {
                        var cutPrice = getcutPrice(1, maWidth, maHeight); // 재단 가격 
                        var frontPrice =  Math.ceil(Math.floor(getmaPrice("아크릴", frontTh, 1, maWidth, maHeight)/ 10) * 10 / 1000) * 1000 + cutPrice; // 앞판가격
                        var rearPrice = (rearTh == 0 ? 0 : Math.ceil(Math.floor(getmaPrice(rearMaterial[1], rearTh, 1, maWidth, maHeight)*colorfactor / 10) * 10 / 1000) * 1000 + cutPrice); // 뒷판가격

                        var maPrice = frontPrice + rearPrice + holeCount * holeVal + sideval; //판가격
                        ma_cutPrice = maPrice * maCount; // 총 재단 가공가격
                        matable_SAW.row.add([
                            materialVal,
                            thlVal,
                            maWidth,
                            maHeight,
                            holeCount,
                            colorVal,
                            maPrice,
                            maCount,
                            ma_cutPrice

                        ]).draw(false);
                        maCalculation("#sortTable-SAW", "#totalCost-SAW");
                    }
                }
                $("#size-SAW").val('');
            }

            //선택행 삭제
            $('#btn-delete-row,#btn-delete-row-SAW').click(function () {
                // alert($('#sortTable > tbody > tr>td').length);
                var delTable, delMatable, totalcost;
                if (this.id == 'btn-delete-row') {
                    delTable = "#sortTable";
                    delMatable = matable;
                    totalcost = "#totalCost "
                } else if (this.id == 'btn-delete-row-SAW') {
                    delTable = "#sortTable-SAW ";
                    delMatable = matable_SAW;
                    totalcost = "#totalCost-SAW"
                }
                $(delTable + '>tbody').children("tr").each(function () {
                    var deltrs = $(this).css("backgroundColor");
                    if (deltrs == 'rgb(65, 105, 225)') {
                        delMatable
                            .row($(this))
                            .remove()
                            .draw();
                        // $(this).remove();
                    }
                });
                maCalculation(delTable, totalcost);
            });

            //초기화  모든 row 삭제
            $('#btn-reset-row,#btn-reset-row-SAW').click(function (target) {
                var selTable;
                if (this.id == 'btn-reset-row') {
                    matable.row().clear().draw();
                    // $("#sortTable > tbody>tr").remove()
                    $('#totalCost').text(0);
                } else if (this.id == 'btn-reset-row-SAW') {
                    matable_SAW.row().clear().draw();
                    $('#totalCost-SAW').text(0);
                }
            });

            //선택한 tr 색상 바꾸기
            // $('#sortTable > tbody ').click( function (event) {  추가된 행에는 적용되지 않는다.
            $('table > tbody').on('click', 'tr', function (event) {
                var backColor = "#ffffff";
                var textColor = "black";
                var orgBColor = "royalblue";
                var orgTColor = "#ffffff";
                if ($(this).css("backgroundColor") != 'rgb(65, 105, 225)') {
                    $(this).css("backgroundColor", orgBColor);
                    $(this).css("color", orgTColor);

                } else {
                    $(this).css("backgroundColor", backColor);
                    $(this).css("color", textColor);
                }
            });

            //선택한 tr 색상 바꾸기 같은 기능
            /*  function getReserveInfo(target) {
                 var tbody = target.parentNode; //target=row,  tbody=tbody, tables=table
                 var tables = document.getElementById("sortTable");
                 var tchi = tbody.childElementCount; //target=row,  tbody=tbody, tables=table
                 var trs = tbody.getElementsByTagName('tr');
                 var seltr = "";
                 var backColor = "#ffffff";
                 var textColor = "black";
                 var orgBColor = "royalblue";
                 var orgTColor = "#ffffff";
    
                 for (var i = 0; i < trs.length; i++) {
                     if (trs[i] == target) {
                         seltr = i;
                         if (tables.rows[seltr + 1].style.backgroundColor != orgBColor) {
                             tables.rows[seltr + 1].style.backgroundColor = orgBColor;
                             tables.rows[seltr + 1].style.color = orgTColor;
                         } else {
                             tables.rows[seltr + 1].style.backgroundColor = backColor;
                             tables.rows[seltr + 1].style.color = textColor;
                         }
                     }
                     var td = trs[i].getElementsByTagName('td');
                 }
             } */


            // $('#btn-add-row').click(function () { //행추가
            //     // var r=$("#content_table").length; 특정 순번의 뒤에 삽입시 코드,  행길이
            //     // $("#table_id").eq(r-1).after(row_html);행 뒤에 삽입

            //     // $('#sortTable > tbody > tr:last') 순차적  마지막 행에. ("tr:not(:first) 첫행은 제외
            //     // document.getElementById("myTable").insertRow(-1).innerHTML = '<tr>...</tr><tr>...</tr>'; 자바스크립트구문

            //     var matrialVal = $('input[name="ma-radio"]:checked').val();
            //     var colorVal = $('input[name="color-radio"]:checked').val();
            //     var thlVal = $('input[name="th-radio"]:checked').val();
            //     $('#sortTable > tbody:last').append(' <tr onclick="getReserveInfo(this);">' +
            //         '<td>' + matrialVal + '</td>' +
            //         '<td>' + thlVal + '</td>' +
            //         '<td>' + colorVal + '</td>' +
            //         '<td>' + maWidth + '</td>' +
            //         '<td>' + maHeight + '</td>' +
            //         '<td>' + maCount + '</td>' +
            //         '<td>320000</td>' +
            //         '<td>30000</td>' +
            //         '<td>350000</td>');
            // });

            //총 금액 합산
            function maCalculation(ftable, ftotalcost) {
                var maCost = 0;
                var rowCount = $(ftable + '> tbody > tr').length; // 추가된 행까지 카운트
                for (var i = 0; i < rowCount; i++) {
                    maCost += Number($(ftable + '> tbody > tr:eq(' + i + ') > td:last').text());
                }
                if (maCost) { } else { maCost = 0; } //data row 가 없어서  값이NaN 이면 '0'
                var maCostComma = maCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); // 3자리 콤마 표시
                $(ftotalcost).text(maCostComma);
            }
            //판 가격 계산
            function getmaPrice(ma, thick, c, W, H) {
                var wNest = getcutMaxNum(2400, 1200, W, H);
                var hNest = getcutMaxNum(2400, 1200, H, W);
                var maxC = Math.max(wNest, hNest); // 한판에 들어가는 최대 수, 가로 세로 바꿔서 비교
                var plateC = parseInt(c / maxC); // 한판을 넘어갈때 판수
                var restC = c % maxC; // 판을 넘어가는 갯수

                function pricecount(count) {
                    var Price;
                    var A = get_W_height(ma, thick, count, W, H);
                    var B = get_H_height(ma, thick, count, W, H);

                    if (A) {
                        if (A[0] < B[0]) {
                            Price = A[1];
                        } else if (A[0] > B[0]) {
                            Price = B[1];
                        } else {
                            if (A[1] < B[1]) {
                                Price = A[1];
                            } else {
                                Price = B[1];
                            }
                        }
                    } else {
                        Price = B[1];
                    }
                    return (Price);
                }
                var PricePlate = pricecount(maxC) * plateC + pricecount(restC);
                PricePlate = PricePlate == 0 ? 1000 : PricePlate;
                return (PricePlate);
            }

            // 재료,두께,갯수,w,h 세로계산
            function get_H_height(ma, thick, c, width, height) {
                var W, H;
                if (parseInt(width) >= parseInt(height)) { W = parseInt(width), H = parseInt(height); } else { W = parseInt(height), H = parseInt(width); } // 큰쪽을 가로로 놓는다.
                if (W > 1200 && H > 450 && H <= 500) { H = 600 }
                if (W > 2400 || H > 1200) {
                    return (false);
                } else {
                    var shareW1200 = parseInt(1200 / W);// 1200에 들어가는 가로 판수
                    var shareH1200 = parseInt(1200 / H);// 1200에 들어가는 세로 판수
                    var w1, w2, w3, h1, h2, h3;
                    var totalH;
                    w1 = (c < shareH1200 ? 0 : shareH1200 * H);
                    h1 = (c < shareH1200 ? 0 : parseInt(c / shareH1200) * W);
                    w2 = (parseInt((c % shareH1200) / shareW1200) < 1 ? 0 : shareW1200 * W);
                    h2 = (parseInt((c % shareH1200) / shareW1200)) * H;
                    w3 = (shareW1200 == 0 ? 0 : ((c % shareH1200) % shareW1200) * W);
                    h3 = ((c % shareH1200) % shareW1200 == 0 || shareW1200 == 0 ? 0 : H);//H;
                    // alert(w1+','+w2+','+w3+','+h1+','+h2+','+h3);
                    if ((h2 + h3) >= W || W > 1200) { //|| shareW1200 == 0
                        w3 = 0;
                        h3 = 0;
                        w2 = (c % shareH1200) * H; // 나머지 * H
                        h2 = (c == 0 || w2 == 0 ? 0 : W);
                        // h2 = c == 0 || shareW1200 == 0 ? 0 : W;
                    } //alert(w1+','+w2+','+w3+','+h1+','+h2+','+h3);
                    totalH = h1 + h2 + h3;
                    var convert = convertSize(h1, h2, h3, w1, w2, w3);
                    h1 = convert[0];
                    h2 = convert[1];
                    h3 = convert[2];
                    w1 = convert[3];
                    w2 = convert[4];
                    w3 = convert[5];

                    var area1 = areaprice(ma, thick, w1, h1); // 세로 1mm 단위로 계산
                    var area2 = areaprice(ma, thick, w2, h2); // 세로 1mm 단위로 계산
                    var area3 = areaprice(ma, thick, w3, h3); //  세로 100mm 단위로 계산
                    var totalArea = area1 + area2 + area3; //총합
                    var result = [totalH, totalArea];

                    return (result);
                }
            }
            // 재료,두께,갯수,w,h  가로 계산
            function get_W_height(ma, thick, c, width, height) {
                var W, H;
                if (parseInt(width) >= parseInt(height)) { W = parseInt(width), H = parseInt(height); } else { W = parseInt(height), H = parseInt(width); } // 큰쪽을 가로로 놓는다.
                if (W > 1200) {
                    return (false);
                } else {
                    var shareW1200 = parseInt(1200 / W); // 1200에 들어가는 가로 판수
                    var shareH1200 = parseInt(1200 / H); // 1200에 들어가는 세로 판수
                    var restW1200 = 1200 % W; // 1200 에 남는 공간
                    var shareRestW1200H = parseInt(restW1200 / H); // 1200  남는 공간에 들어가는 세로 판수
                    var w1 = 0, w2 = 0, w3 = 0, h1 = 0, h2 = 0, h3 = 0;
                    var totalH;
                    for (var i = 0, j = 0, h3Count = 0, delcNum = 0; i < c; i++) {
                        // 옆 공간에 들어가는 수량 계산 필요
                        // var j=0;// 옆 사이드에 세로로 들어가는 판
                        var delcount = delcNum * shareRestW1200H; //
                        w3 = W * ((i + 1 - j - delcount) % shareW1200); //0~ 가로 사이즈
                        h3 = (i + 1 - j - delcount) % shareW1200 == 0 ? 0 : H; // or 0
                        h2 = parseInt((i + 1 - j - delcount) / shareW1200) * H - h3Count * W;
                        if (i + 1 < shareW1200) {
                            w2 = 0;
                        } else {
                            w2 = shareW1200 * W;
                            if (h2 > W) {
                                w2 += H * (j % shareRestW1200H);
                                j++;
                                if (j / shareRestW1200H > 1) {
                                    w2 = shareW1200 * W;
                                    j = 0;
                                    h3Count++;
                                    h2 -= W;
                                    delcNum++;
                                }
                            }
                        }
                        w1 = shareW1200 * W + shareRestW1200H * H; //h1 높이만  설정해도 된다.
                        h1 = h3Count * W;
                    }
                    totalH = h1 + h2 + h3;
                    var convert = convertSize(h1, h2, h3, w1, w2, w3);
                    h1 = convert[0];
                    h2 = convert[1];
                    h3 = convert[2];
                    w1 = convert[3];
                    w2 = convert[4];
                    w3 = convert[5];

                    var area1 = areaprice(ma, thick, w1, h1); // 세로 1mm 단위로 계산
                    var area2 = areaprice(ma, thick, w2, h2); // 세로 1mm 단위로 계산
                    var area3 = areaprice(ma, thick, w3, h3); //  세로 100mm 단위로 계산
                    var totalArea = area1 + area2 + area3; //총합
                    var result = [totalH, totalArea];
                    return (result);
                }
            }
            // 사이즈  재설정
            function convertSize(h1, h2, h3, w1, w2, w3) {

                if (h1 + h2 + h3 > 2100) {
                    if (h3 == 0) {
                        if (h2 == 0) {
                            h1 = 2400;
                        } else {
                            h2 = 2400 - h1;
                        }
                    } else {
                        h3 = 2400 - h2 - h3;
                    }
                } else {
                    if (h3 == 0) {
                        if (h2 == 0) {
                            h1 = unit100(h1);
                        } else {
                            h2 = unit100(h1 + h2) - h1;
                        }
                    } else {
                        h3 = unit100(h1 + h2 + h3) - h2 - h1;
                    }
                }

                w1 = unit100(over900(w1));
                w2 = unit100(over900(w2));
                w3 = unit100(over900(w3));
                var value = [h1, h2, h3, w1, w2, w3];
                return (value);
            }

            //면적가격 계산
            function areaprice(ma, thick, w, h) {
                //var totalMa = Math.ceil(Math.floor((((materials[ma])["thk" + thick]).unitCost * w * h) / 10) * 10 / 1000) * 1000; // 1000단위 올림. 1의자리 오차때문에 원판가격과 차이발생해 floor로 1의자리 삭제
                var totalMa = (((materials[ma])["thk" + thick]).unitCost * w * h); // 1000단위 올림. 1의자리 오차때문에 원판가격과 차이발생해 floor로 1의자리 삭제
                return totalMa;
            }

            // 사이즈 100 단위 올림
            function unit100(num) {
                return (Math.ceil(num / 100) * 100);
            }

            //가로 900 이상은 1200
            function over900(num) {
                return (num > 900 ? 1200 : num);
            }

            //재단비 계산
            function getcutPrice(c, W, H) {
                var cutNum = c;//재단 수
                var w1200 = getcutMaxNum(2400, 1200, H, W);
                var w2400 = getcutMaxNum(2400, 1200, W, H);
                var maxNum = Math.max(w1200, w2400); // 한판에 들어가는 최대 수, 가로 세로 바꿔서 비교
                var plateNum = parseInt(cutNum / maxNum); // 판수
                var modNum = cutNum % maxNum; // 판에 들어가지 않는 나머지 판
                var cutCost = 1000; // 재단비 1000원
                var totalCUt = (Math.ceil((2 * Math.sqrt(modNum) - 2) + 2) + (Math.ceil((2 * Math.sqrt(maxNum) - 2) + 2) * plateNum)) * cutCost; // 기본 2,000원 +
                return totalCUt;
            }

            // 한판에 들어가는 최대 수 계산
            function getcutMaxNum(maW, maH, W, H) {
                var widthNum = parseInt(maW / W);
                var heightNum = parseInt(maH / H);
                var checkWidth = maW % W;
                if (widthNum != 0) {
                    var basicNum = widthNum * heightNum + getcutMaxNum(checkWidth, maH, H, W);
                    return basicNum;
                } else { return 0; }
            }
        });

    </script>
    <script>// 시계
        // if (sec >= 50) {// 50초 이상일 때 색을 변환해 준다.
        //     sec = '<span style="color:#de1951;">' + sec + '</span>'
        // }

        function setClock() {
            var dateInfo = new Date();
            var dayList = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일']
            var hour = modifyNumber(dateInfo.getHours());
            var min = modifyNumber(dateInfo.getMinutes());
            var sec = modifyNumber(dateInfo.getSeconds());
            var year = dateInfo.getFullYear();
            var month = dateInfo.getMonth() + 1; //monthIndex를 반환해주기 때문에 1을 더해준다.
            var date = dateInfo.getDate();
            var day = dayList[dateInfo.getDay()];
            var amPm = 'AM'; // 초기값 AM

            if (hour >= 12) { // 시간이 12보다 클 때 PM으로 세팅, 12를 빼줌
                amPm = 'PM';
                hour = hour== 12 ? 12 :modifyNumber(hour - 12);
            }

            document.getElementById("time").innerHTML = hour + ":" + min;
            document.getElementById("amPm").innerHTML = amPm;
            document.getElementById("sec").innerHTML = sec;
            document.getElementById("date").innerHTML = `${year}. ${month}. ${date}.  ${day}`; // year + "년 " + month + "월 " + date + "일" ;
        }
        function modifyNumber(time) { // 10 미만은 0을 추가
            if (parseInt(time) < 10) {
                return "0" + time;
            }
            else
                return time;
        }
        window.onload = function () {
            setClock();
            // setTimeout("setClock()", 1000);         // 1초마다 printClock() 함수 호출
            setInterval(setClock, 1000); //1초마다 setClock 함수 실행
        }

    </script>
</body>

</html>